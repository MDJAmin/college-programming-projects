<!doctype html>
<html
  lang="fa"
  dir="rtl"
>
  <head>
    <meta charset="UTF-8" />
    <title>داشبورد</title>
    <link
      rel="stylesheet"
      href="css/style.css"
    />
    <link
      rel="stylesheet"
      href="css/dashboard.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- NAV -->
    <nav class="navbar">
      <div class="nav-links">
        <a href="index.html">خونه</a>
        <a href="manage.html">مدیریت</a>
        <a href="dashboard.html">داشبورد</a>
      </div>
      <h1>
        <img
          class="logo"
          src="assets/logo.png"
          alt="logo"
        />
      </h1>
    </nav>

    <section class="body">
      <div class="card">
        <h2>گزارش مالی</h2>

        <div class="summary">
          <div class="summary-card income">
            <p>مجموع درآمد</p>
            <h3 id="incomeTotal"></h3>
          </div>

          <div class="summary-card expense">
            <p>مجموع هزینه</p>
            <h3 id="expenseTotal"></h3>
          </div>

          <div class="summary-card balance">
            <p>موجودی کل</p>
            <h3 id="total"></h3>
          </div>
        </div>

        <canvas id="chart"></canvas>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
      <div class="footer-container">
        <!-- Info -->
        <div class="footer-info">
          <h1>
            <img
              class="logo"
              src="assets/logo.png"
              alt="logo"
            />
          </h1>
          <p>سیستم مدیریت مالی با ساختار داده Doubly Linked List و طراحی مدرن</p>
          <!-- Quick Links -->
          <div class="footer-links">
            <h4>دسترسی سریع</h4>
            <ul>
              <li><a href="index.html">خانه</a></li>
              <li><a href="manage.html">مدیریت تراکنش‌ها</a></li>
              <li><a href="dashboard.html">داشبورد</a></li>
            </ul>
          </div>

          <!-- Contact Info -->
          <div class="footer-contact-info">
            <h4>اطلاعات تماس</h4>
            <p>ایمیل: info@financialsystem.com</p>
            <p>تلفن: 0912-000-0000</p>
          </div>

          <!-- Social Media -->
          <div class="footer-social">
            <h4>شبکه‌های اجتماعی</h4>
            <div class="social-icons">
              <a href="#"><i class="ri-instagram-line"></i></a>
              <a href="#"><i class="ri-telegram-line"></i></a>
              <a href="#"><i class="ri-linkedin-box-line"></i></a>
              <a href="#"><i class="ri-github-line"></i></a>
            </div>
          </div>
        </div>

        <!-- Contact Form -->
        <div class="footer-contact">
          <h3>با ما در ارتباط باشید</h3>

          <form id="contactForm">
            <div class="contact-inputs">
              <input
                type="text"
                id="name"
                placeholder="نام شما"
                required
              />
              <input
                type="email"
                id="email"
                placeholder="ایمیل شما"
                required
              />
              <textarea
                id="message"
                placeholder="پیام شما"
                required
              ></textarea>
            </div>
            <button type="submit">ارسال پیام</button>
          </form>
        </div>
      </div>

      <div class="footer-bottom">© 2025 Financial System | All Rights Reserved</div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/linkedList.js"></script>
    <script
      src="js/app.js"
      defer
    ></script>

    <script>
      window.onload = function () {
        const data = JSON.parse(localStorage.getItem("transactions")) || [];

        let income = 0;
        let expense = 0;

        data.forEach((t) => {
          if (t.type === "income") {
            income += Number(t.amount);
          } else {
            expense += Number(t.amount);
          }
        });

        const total = income - expense;

        document.getElementById("incomeTotal").innerText = income.toLocaleString() + " تومان";

        document.getElementById("expenseTotal").innerText =
          expense.toLocaleString() + " تومان";

        document.getElementById("total").innerText = total.toLocaleString() + " تومان";

        document.getElementById("total").innerText = total.toLocaleString() + " تومان";

        const ctx = document.querySelector("#chart");

        new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: ["Income", "Expense"],
            datasets: [
              {
                data: [income, expense],
                backgroundColor: ["#00f5c4", "#ff3e6c"],
              },
            ],
          },
          options: {
            plugins: {
              legend: {
                labels: {
                  color: "white",
                },
              },
            },
          },
        });
      };
    </script>
  </body>
</html>
